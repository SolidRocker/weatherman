(this.webpackJsonpweatherman=this.webpackJsonpweatherman||[]).push([[0],{102:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(9),s=n.n(i),o=(n(70),n(10)),c=n(11),l=n(13),u=n(12),d=n(43),h=n.n(d),p="a80e3d84441af6900f068affd975bd7b",f="https://cors-anywhere.herokuapp.com/",g={toCapitalize:function(e){var t=e.split(" "),n="";return t.forEach((function(e){""!==n&&(n+=" "),n+=e.slice(0,1).toUpperCase()+e.slice(1)})),n},toDayOfWeek:function(e){switch(e){case 0:return"sun";case 1:return"mon";case 2:return"tue";case 3:return"wed";case 4:return"thu";case 5:return"fri";case 6:return"sat";default:return""}},getHourMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(new Date).getHours(),a=(n+e)%24,r=t?" ":"",i=r+"am";return a>12&&(a-=12,i=r+"pm"),0===a&&(a=12),a+i},getWeatherAPI:function(e,t){return f+"https://api.openweathermap.org/data/2.5/onecall?lat="+e+"&lon="+t+"&exclude=minutely&units=metric&appid=8a3b877f6488d0d35ad8827d3461a848"},getGeocodeAPI:function(e){return f+"http://api.positionstack.com/v1/forward?access_key="+p+"&query="+e},getReverseGeocodeAPI:function(e,t){return f+"http://api.positionstack.com/v1/reverse?access_key="+p+"&query="+e+","+t},createWeatherObj:function(e){var t=[],n=0;return e.daily.forEach((function(a){var r=new Date(1e3*a.dt),i=g.toDayOfWeek(r.getDay()),s={temp:{day:Math.round(a.temp.day),night:Math.round(a.temp.night)},feels:{day:Math.round(a.feels_like.day),night:Math.round(a.feels_like.night)},humidity:a.humidity,windspeed:Math.round(3.6*a.wind_speed),sunrise:a.sunrise,sunset:a.sunset,day:i,weather:{main:a.weather[0].main,description:g.toCapitalize(a.weather[0].description),icon:a.weather[0].icon},counter:n},o=24*n,c=o+23,l=[],u=0;c=c>47?23:c;for(var d=o=o>24?0:o;d<=c;++d){var h=e.hourly[d],p={hour:u,temp:Math.round(h.temp),feels:Math.round(h.feels_like),humidity:h.humidity,windspeed:Math.round(3.6*h.wind_speed),weather:{main:h.weather[0].main,description:g.toCapitalize(h.weather[0].description),icon:h.weather[0].icon}};l.push(p),++u}s.hourly=l,t.push(s),++n})),t}},j=(n(18),n(89),n(56)),m=(n(90),n(3)),y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onAnimationEnd=function(){2===a.state.spinState&&a.setState({spinState:0,isSpinning:!1})},a.state={spinState:0,isSpinning:!1},a}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.isSpinning!==e.isSpinning&&(!this.state.isSpinning&&this.props.isSpinning&&this.setState({isSpinning:!0,spinState:1}),this.state.isSpinning&&!this.props.isSpinning&&this.setState({spinState:2}))}},{key:"displaySpinner",value:function(){if(!this.state.isSpinning)return null;var e="spin-container";switch(this.state.spinState){case 0:e+=" spin-container-end-spin";break;case 1:e+=" spin-container-start-spin spin-container-fade-in";break;case 2:e+=" spin-container-fade-out"}return Object(m.jsx)("div",{className:e,onAnimationEnd:this.onAnimationEnd,children:Object(m.jsx)(j.a,{animation:"border",role:"status",variant:"light",className:"spin"})})}},{key:"render",value:function(){return Object(m.jsx)("div",{children:this.displaySpinner()})}}]),n}(a.Component),b=n(31),v=n.p+"static/media/thunder.19ff3c30.svg",O=n.p+"static/media/drizzle.9988edfd.svg",w=n.p+"static/media/rain.130d6250.svg",S=n.p+"static/media/snow.dce3f5e7.svg",x=n.p+"static/media/day.c33ef664.svg",k=n.p+"static/media/night.6cf4adcd.svg",N=n.p+"static/media/cloudy.24f9a474.svg",W=(n(92),n(63)),C=(n(96),n(97),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onUpdate=function(e){a.props.onUpdateTimeSlider(e)},a.state={spinState:0,isSpinning:!1},a}return Object(c.a)(n,[{key:"getMarks",value:function(){return{2:g.getHourMark(2),7:g.getHourMark(7),12:g.getHourMark(12),17:g.getHourMark(17),22:g.getHourMark(22)}}},{key:"getSliderClass",value:function(){var e="time-slider";return this.props.isByHour||(e+=" time-slider-day"),e}},{key:"render",value:function(){return Object(m.jsx)(W.a,{className:this.getSliderClass(),max:23,marks:this.getMarks(),onChange:this.onUpdate})}}]),n}(a.Component)),M=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={currSelection:0},a}return Object(c.a)(n,[{key:"isDayTimeNow",value:function(){var e=new Date;return!(e<this.props.currWeather.sunrise||e>this.props.currWeather.sunset)}},{key:"getBGIcon",value:function(){switch(this.props.currWeather.weather.main){case"Thunderstorm":return v;case"Drizzle":return O;case"Rain":return w;case"Snow":return S;case"Clear":return this.isDayTimeNow()?x:k;default:return N}}},{key:"getTemperature",value:function(){return this.isDayTimeNow()?this.props.currWeather.temp.day:this.props.currWeather.temp.night}},{key:"getFeels",value:function(){return this.isDayTimeNow()?this.props.currWeather.feels.day:this.props.currWeather.feels.night}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"info-body",children:[Object(m.jsx)("img",{className:"info-bg-icon",src:this.getBGIcon(),alt:this.props.currWeather.weather.main}),Object(m.jsxs)("div",{className:"info-temp",children:[this.getTemperature(),"\xb0"]}),Object(m.jsxs)("div",{className:"info-desc-text",children:[Object(m.jsx)(b.a,{className:"info-desc-icon"}),Object(m.jsx)("span",{children:Object(m.jsx)("b",{children:this.props.currWeather.weather.description})})]}),Object(m.jsxs)("div",{className:"info-desc-text",children:[Object(m.jsx)(b.b,{className:"info-desc-icon"}),Object(m.jsxs)("span",{children:["Humidity: ",Object(m.jsxs)("b",{children:[this.props.currWeather.humidity,"%"]})]})]}),Object(m.jsxs)("div",{className:"info-desc-text",children:[Object(m.jsx)(b.c,{className:"info-desc-icon"}),Object(m.jsxs)("span",{children:["Wind Speed: ",Object(m.jsxs)("b",{children:[this.props.currWeather.windspeed,"km/h"]})]})]}),Object(m.jsxs)("div",{className:"info-desc-text",children:[Object(m.jsx)(b.d,{className:"info-desc-icon"}),Object(m.jsxs)("span",{children:["Feels Like: ",Object(m.jsxs)("b",{children:[this.getTemperature(),"\xb0C"]})]})]}),Object(m.jsx)("div",{className:"info-space"}),Object(m.jsx)(C,{className:"info-time-slider",onUpdateTimeSlider:this.props.onUpdateTimeSlider,isByHour:this.props.isByHour})]})}}]),n}(a.Component),D=[{label:"Belgium",cities:["Belgium"]},{label:"China",cities:["Beijing","Changsha","Chongqing","Fuzhou","Guangzhou","Lanzhou","Nanjing","Harbin","Shanghai"]},{label:"France",cities:["Nantes","Lyon","Marseille","Paris"]},{label:"Germany",cities:["Berlin","Dusseldorf","Frankfurt","Hamburg","Munich","Stuttgart","Qwertyuuiopasdfghjkl"]},{label:"Malaysia",cities:["George Town","Ipoh","Johor Bahru","Kuala Lumpur","Kuala Terengganu","Malacca"]},{label:"Nepal",cities:["Nepal"]},{label:"Singapore",cities:["Singapore"]},{label:"Taiwan",cities:["Taipei","Taichung","Kaoshiung"]},{label:"USA",cities:["Atlanta","Denver","Houston","Miami","New York","Orlando","Phoenix","Los Angeles","Las Vegas","San Francisco","Seattle","Washington DC"]}],H=n(64),T=n(65),B=n(59),E=r.a.forwardRef((function(e,t){var n=e.children,a=e.onClick;return Object(m.jsxs)("div",{href:"",ref:t,className:"country-dropdown-current",onClick:function(e){e.preventDefault(),a(e)},children:[n,Object(m.jsxs)("span",{className:"country-dropdown-arrow",children:["\xa0",Object(m.jsx)(B.a,{})]})]})})),L=r.a.forwardRef((function(e,t){var n=e.children,r=e.style,i=e.className,s=e["aria-labelledby"],o=Object(a.useState)(""),c=Object(H.a)(o,2),l=c[0],u=c[1];return Object(m.jsxs)("div",{ref:t,style:r,className:i,"aria-labelledby":s,children:[Object(m.jsx)(T.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",onChange:function(e){return u(e.target.value)},value:l}),Object(m.jsx)("ul",{className:"list-unstyled",children:n.filter((function(e){return!l||e.key.toLowerCase().startsWith(l)}))})]})})),A=n(26),P=(n(102),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"generateFullList",value:function(){var e=[];D.forEach((function(t){e.push({type:"country",name:t.label}),t.cities.forEach((function(t){e.push({type:"city",name:t})}))}));var t=e.map((function(e,t){if("country"===e.type){var n=e.name+"_"+e.type;return Object(m.jsx)(A.a.Header,{className:"country-dropdown-country",children:e.name.toUpperCase()},n)}return Object(m.jsxs)(A.a.Item,{eventKey:e.name,className:"country-dropdown-city-multi",children:["\xa0\xa0",e.name]},e.name)}));return Object(m.jsx)(A.a.Menu,{as:L,className:"country-dropdown-menu",children:t})}},{key:"render",value:function(){return Object(m.jsxs)(A.a,{className:"country-dropdown",onSelect:this.props.onSelect,children:[Object(m.jsx)(A.a.Toggle,{as:E,children:this.props.country}),this.generateFullList()]})}}]),n}(a.Component)),I=n(61),U=n.n(I),F=(n(104),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onSelect=function(e){a.setState({currSelection:e}),a.props.onUpdate(e)},a.renderBox=function(e,t){var n="scroll-box",r="scroll-arrow-hidden";a.state.currSelection==t&&(n="scroll-box-active",r="scroll-arrow");var i="http://openweathermap.org/img/wn/"+e.weather.icon+"@4x.png";return Object(m.jsxs)("div",{className:n,children:[Object(m.jsx)("div",{className:r}),Object(m.jsx)("div",{className:"scroll-date",children:e.day.toUpperCase()}),Object(m.jsx)("img",{className:"scroll-icon",src:i,alt:e.weather.description}),Object(m.jsxs)("div",{className:"scroll-temp-day",children:[e.temp.day,"\xb0"]}),Object(m.jsxs)("div",{className:"scroll-temp-night",children:[e.temp.night,"\xb0"]})]},t)},a.state={currSelection:0},a}return Object(c.a)(n,[{key:"render",value:function(){return Object(m.jsx)(U.a,{alignCenter:!1,data:this.props.dailyWeather.map(this.renderBox),selected:this.props.currSelection,onSelect:this.onSelect})}}]),n}(a.Component)),z=n(37),G=n(27),_=n(62),R=n(47),J=(n(105),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onAnimationEnd=function(){a.setState({hasInit:!0})},a.state={hasInit:!1,polling:{enabled:!0,url:"https://ipv4.icanhazip.com/",interval:5e3,timeout:3e3}},a}return Object(c.a)(n,[{key:"displayAlert",value:function(e,t){return e||this.state.hasInit?Object(m.jsx)("div",{className:t,children:Object(m.jsx)(_.a,{className:t,variant:"danger",onAnimationEnd:this.onAnimationEnd,children:"You are currently offline. Please check your internet connection."})}):null}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(R.Online,{polling:this.state.polling,children:this.displayAlert(!1,"weather-alert-fade-out")}),Object(m.jsx)(R.Offline,{polling:this.state.polling,children:this.displayAlert(!0,"weather-alert-stay weather-alert-fade-in")})]})}}]),n}(a.Component)),K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).closeModal=function(){a.setState({hasError:!1,errorMsg:""})},a.onSelectDayScroll=function(e){a.setState({currSelection:e,currWeather:a.state.dailyWeather[e],isByHour:!1,currHour:0})},a.onSelectDropdown=function(e){a.getCityGeocode(e)},a.onUpdateTimeSlider=function(e){a.setState({currHour:e,isByHour:!0})},a.state={isInit:!1,isLoading:!0,latitude:47.67401743463503,longitude:-122.1361362693161,country:"",dailyWeather:[],currSelection:0,currWeather:{},currHour:0,isByHour:!1,hasError:!1,errorMsg:""},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){if("geolocation"in navigator){var e=this;navigator.geolocation.getCurrentPosition((function(t){h.a.get(g.getReverseGeocodeAPI(t.coords.latitude,t.coords.longitude)).then((function(n){n.data.data.length>1&&e.setState({country:n.data.data[0].locality}),e.setState({latitude:t.coords.latitude,longitude:t.coords.longitude},(function(){e.getWeatherData()}))})).catch((function(t){e.setState({country:"Seattle"}),e.getWeatherData()}))}))}}},{key:"showErrorPopup",value:function(){return Object(m.jsxs)(G.a,{size:"md",centered:!0,show:this.state.hasError,onHide:this.closeModal,children:[Object(m.jsx)(G.a.Header,{closeButton:!0,children:Object(m.jsx)(G.a.Title,{children:"Error Loading Weather Data"})}),Object(m.jsx)(G.a.Body,{children:this.state.errorMsg}),Object(m.jsx)(G.a.Footer,{children:Object(m.jsx)(z.a,{variant:"primary",onClick:this.closeModal,children:"Close"})})]})}},{key:"getWeatherData",value:function(){var e=this,t=this;h.a.get(g.getWeatherAPI(this.state.latitude,this.state.longitude)).then((function(t){var n=g.createWeatherObj(t.data);e.setState({dailyWeather:n,isInit:!0,isLoading:!1,isByHour:!1,currHour:0,currWeather:n[0]})})).catch((function(e){var n="Network error. Please try again.";e.response&&(n="Error "+e.response.status+": "+e.response.statusText+". Please try again."),t.setState({isLoading:!1,hasError:!0,errorMsg:n})}))}},{key:"getCurrWeather",value:function(){var e=JSON.parse(JSON.stringify(this.state.currWeather));if(this.state.isByHour){var t=e.hourly[this.state.currHour];e.temp.day=e.temp.night=t.temp,e.feels.day=e.feels.night=t.feels,e.humidity=t.humidity,e.weather=t.weather,e.windspeed=t.windspeed}return e}},{key:"getDisplayDate",value:function(){var e=g.toCapitalize(this.state.currWeather.day)+", ";return e+=g.getHourMark(this.state.currHour,!0)}},{key:"getCityGeocode",value:function(e){var t=this;this.setState({isLoading:!0}),h.a.get(g.getGeocodeAPI(e),{timeout:5e3}).then((function(n){t.setState({latitude:n.data.data[0].latitude,longitude:n.data.data[0].longitude,country:e},(function(){t.getWeatherData()}))})).catch((function(e){console.log(e.message);t.setState({isLoading:!1,hasError:!0,errorMsg:"Cannot load data from city. Please try again."})}))}},{key:"showLoadingScreen",value:function(){return Object(m.jsx)(y,{isSpinning:this.state.isLoading})}},{key:"render",value:function(){return this.state.isInit?Object(m.jsxs)("div",{className:"weather",children:[this.showErrorPopup(),this.showLoadingScreen(),Object(m.jsxs)("header",{className:"weather-header",children:[Object(m.jsx)(J,{}),Object(m.jsx)(P,{country:this.state.country,onSelect:this.onSelectDropdown}),Object(m.jsxs)("div",{className:"weather-time",children:[this.getDisplayDate(),"\xa0"]})]}),Object(m.jsx)("div",{className:"weather-body-bg",children:Object(m.jsx)(M,{currWeather:this.getCurrWeather(),onUpdateTimeSlider:this.onUpdateTimeSlider,isByHour:this.state.isByHour})}),Object(m.jsx)(F,{dailyWeather:this.state.dailyWeather,currSelection:this.state.currSeection,onUpdate:this.onSelectDayScroll})]}):null}}]),n}(a.Component),q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};n(106);s.a.render(Object(m.jsx)(K,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/weatherman",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/weatherman","/service-worker.js");q?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Y(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Y(t,e)}))}}(),Q()},18:function(e,t,n){},70:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},92:function(e,t,n){},97:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.03da851d.chunk.js.map